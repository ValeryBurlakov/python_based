# Ð”Ð¾Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ð¸ 3 Ð¸ 4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ»Ð°ÑÑ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹
# Ð¸Ð¼ÐµÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹:
# ðŸ“Œ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð· Ð·Ð°Ð´Ð°Ð½Ð¸Ñ 4)
# ðŸ“Œ Ð²Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ - Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸Ð¼Ñ Ð¸ id Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð”Ð»Ñ
# Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ
# Ð¼Ð°Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¼ÐµÑ‚Ð¾Ð´ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð½Ð° Ñ€Ð°Ð²ÐµÐ½ÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
# Ð•ÑÐ»Ð¸ Ñ‚Ð°ÐºÐ¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð½ÐµÑ‚, Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
# Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°. Ð ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÐµÑÑ‚ÑŒ, Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÐµÐ³Ð¾ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¸Ð·
# Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
# ðŸ“Œ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð•ÑÐ»Ð¸ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
# Ð¼ÐµÐ½ÑŒÑˆÐµ, Ñ‡ÐµÐ¼ Ð²Ð°Ñˆ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ, Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑƒÑ€Ð¾Ð²Ð½Ñ
# Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°.


from pathlib import Path
import json


class ProjectException(Exception):
    pass


class LevelError(ProjectException):
    pass


class AccessError(ProjectException):
    pass


class User:
    def __init__(self, name, id, level):
        self.name = name
        self.id = id
        self.level = level

    def __eq__(self, other):
        return self.id == other.id and self.name == other.name

    def __hash__(self):
        return hash((self.name, self.id))

    def __str__(self):
        return f'{self.name=} {self.id=} {self.level=}'

    def __repr__(self):
        return f'User(name = {self.name} id = {self.id}, level = {self.level})'


class Project:

    def __init__(self):
        self.user = None
        self.users = set()

    def read_json(self, file_path: Path) -> set[User]:
        with open(file_path, 'r', encoding='utf-8') as f:
            file_users = json.load(f)
        for level, ids_names_dict in file_users.items():
            for id, name in ids_names_dict.items():
                self.users.add(User(level=int(level), id=int(id), name=name))
        return self.users

    def add_user(self, name, id, level):
        if level < self.user.level:
            raise LevelError
        new_user = User(name, id, level)
        self.users.add(new_user)
        return new_user

    def enter_project(self, name, id):
        cur_user = User(name, id, 0)
        if cur_user not in self.users:
            raise AccessError
        for user in self.users:
            if cur_user == user:
                self.user = user
                return self.user


if __name__ == '__main__':
    # for user in read_json(Path("users.json")):
    #     print(user)
    project1 = Project()
    project1.read_json(Path("users.json"))
    print(project1.enter_project('Ð Ð¾Ð¼Ð°Ð½', 6895))
    print(project1.add_user('Molodec', 36643, 5))
